---
alwaysApply: true
---
## Supabase Usage (No Drizzle)

- Use `src/lib/supabaseClient.ts` for client-side and `src/lib/server/supabaseAdmin.ts` for server-side admin operations.
- Do not reintroduce Drizzle ORM; all DB access via Supabase client.
- Environment variables:
  - Client: `PUBLIC_SUPABASE_URL` via `$env/dynamic/public`.
  - Server: `SUPABASE_URL`, `SUPABASE_SECRET_KEY` via `$env/dynamic/private`.
- Handle `auth.getUser()` results safely; redirect outside of assignment expressions (avoid `return (window.location.href = "/login")`).
